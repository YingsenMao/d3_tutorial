<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>D3: A simple bar chart</title>
        <script type="text/javascript" src="d3.js"></script>
	</head>
	<body>
		<script type="text/javascript">
			//Width and height
			var w = 500;
			var h = 300;

			//Original data
			var dataset = [
				{ apples: 5, oranges: 10, grapes: 22 },
				{ apples: 4, oranges: 12, grapes: 28 },
				{ apples: 2, oranges: 19, grapes: 32 },
				{ apples: 7, oranges: 23, grapes: 35 },
				{ apples: 23, oranges: 17, grapes: 43 }
			];
            /*
            var keys = Object.keys(dataset[0]);
            
            console.log(keys);
            */
            
            var stack = d3.stack()
                            .keys(Object.keys(dataset[0]))
            
            var series = stack(dataset);
            
            console.log(series);
            
            var xScale = d3.scaleBand()
                            .domain(d3.range(series[0].length))
                            .range([0, w])
                            .paddingInner(0.05);

            var yScale = d3.scaleLinear()
                            .domain([
                                0, 
                                d3.max(series, function(d) { 
                                    return d3.max(d, function(d) { 
                                        return d;
                                    }) 
                                })
                            ])
                            .range([0, h]);
            var test =   d3.max(series, function(innerArray) { 
                                return d3.max(innerArray, function(innerinnerArray) { 
                                    return d3.max(innerinnerArray, function(innerinnerinnerArray) { 
                                        return innerinnerinnerArray;
                                    })
                                }) 
                            })
            console.log(test);
            console.log(series[1][0]);
        </script>
	</body>
</html>